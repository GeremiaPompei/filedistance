# filedistance

#### FileDistance è un’applicazione utile per calcolare la distanza tra due file. Essa in particolare oltre a questo è in grado di:

1.	Salvare le modifiche per passare dal primo file al secondo in un altro file (chiamato file_m).
2.	Convertire tramite il file_m il primo file nel secondo.
3.	Ritornare i path assoluti dei file con distanza minore interni ad una directory.
4.	Ritornare i path assoluti dei file con distanza minore di un limite dato interni ad una directory.

#### FileDistance è capace di fare ciò tramite le sue implementazioni sviluppate all’interno di file separati:

1.	DISTANCE: In distance abbiamo le funzioni che permettono di calcolare la distanza minima tra due file (distanza di Edit) e di salvare le modifiche per passare dal primo file al secondo in uno nuovo chiamato file_m. Per calcolare la distanza di Edit è stato usato l’algoritmo di Wagner-Fischer. Esso permette di calcolare la distanza tra le stringhe di byte interne a due file costruendo una matrice che prende come dimensione le lunghezze delle due stringhe. All’interno di tale matrice poi vengono aggiunti dei numeri (all’interno delle caselle date da riga e colonna) per ogni riga scorrendo da sinistra verso destra. Ognuno tra tali numeri aggiunti corrisponde al valore minore tra il numero sopra, quello in alto a sinistra e quello a sinistra rispetto quello preso in considerazione più uno. Questo avviene in tutti i casi in cui ci troviamo in una casella posizionata in riga n e colonna m dove l’m-esimo byte della stringa del primo file e l’n-esimo byte della stringa del secondo file sono diversi. Nel caso in cui questi siano uguali si esegue la stessa operazione senza aggiungere uno. In questo file vi è anche la funzione che permette tramite la matrice creata di ottenere le modifiche da applicare al primo file per trasformarlo nel secondo. Questo viene fatto risalendo la matrice dall’ultima posizione, ovvero quella più in basso a destra. L’algoritmo per comprendere e salvare le modifiche permette di andare dalla casella in cui ci si trova verso sinistra, alto o obliquo (in alto a sinistra). Si decide una tra queste posizioni in base a quale è il minore dei numeri memorizzati nella matrice creata precedentemente interno ad una tra le tre caselle. Nel caso in cui il numero minore è uguale a quello dove si sta sostando non avviene alcuna modifica, in caso contrario: se il numero minore è nella casella al di sopra si aggiunge alla prima stringa l’n-esimo(numero della riga in cui si andrà a sostare) elemento della seconda, se il numero minore è nella casella in alto a sinistra si modifica l’m-esimo(numero della colonna in cui si andrà a sostare) numero della prima stringa con l’n-esimo numero della seconda, se il numero minore è nella casella alla sinistra si elimina l’m-esimo elemento dalla prima stringa. Tali operazioni vengono salvati nel file_m per essere riutilizzate poi da altre funzioni. Inoltre viene monitorato il tempo di tali operazioni che viene stampato in una riga dello standard output con la relativa distanza minima.
2.	APPLY: In apply abbiamo le funzioni che permettono di prendere un file e un file_m e applicando le operazioni del secondo al primo generare un file in output. Queste funzioni permettono di fare l’operazione inversa a quella di distance; infatti il file in output corrisponderebbe al secondo file di distance mentre il file in input al primo. L’algoritmo implementato per generare il file in output non fa altro che salvare il contenuto del primo file in una stringa e il contenuto del secondo in un array di strutture associate alle operazioni e scorrere queste due salvando il tutto in una stringa di appoggio. Fatto ciò tale stringa viene salvata nel file di output. In particolare viene scorso un indice per far riferimento ad ogni carattere della stringa di appoggio e se questo è uguale al numero della seguente modifica viene aggiunto, modificato o eliminato un byte, se no viene semplicemente aggiunto il relativo byte della stringa in input. Nell’aggiunta viene concatenato il byte interno alla struttura e viene regredito l’indice che serve per scorrere sui byte della stringa in input, nella modifica viene semplicemente aggiunto il byte della struttura, mentre nell’eliminazione vengono scorse le strutture nell’array e gli indici del file in input fino a trovare un’operazione di aggiunta o modifica. Per salvare le operazioni del file_m in un array di strutture vengono usate delle funzioni che permettono di estrarre i token relativi al tipo di operazione(aggiunta, modifa o eliminazione), il numero su cui eseguire tale operazione e il byte da aggiungere o modificare.
3.	SEARCH: In search abbiamo le funzioni che permettono di ricercare all’interno di una directory (e le relative sotto directory) i file con distanza di Edit minima rispetto al file dato. Oltre a ciò questo file presenta funzioni in grado di restituire il path dei file con distanza di Edit minore di un certo limite dato all’interno di una certa directory rispetto ad un file passato in input. Per eseguire queste due operazioni è stata costruita una funzione ricorsiva che permette di entrare dentro alle directory (eseguendo una visita in profondità) e salvare i path di ogni file incontrato all’interno di un array di stringhe. Salvati tutti i file poi nel primo caso viene calcolata la distanza di Edit tra quello in input e quelli presenti nell’array e in caso un file abbia distanza minore di quello precedente viene scritto al suo posto nella stringa che poi verrà stampata. Nel caso in cui un file abbia distanza uguale a quella del file precedente il path di tale file viene concatenato alla stringa dove si trova il path del file precedente con stessa distanza di Edit. Nel secondo caso invece vengono salvati tutti i path dei file dell’array minori del limite dato all’interno di un array di strutture con la relativa distanza dal file in input. Fatto ciò viene eseguito l’algoritmo di bubblesort sulle distanze di ogni file riordinandoli in ordine crescente così da restituire in output in modo riordinato il relativo path con relativa distanza.
4.	UTILITY: In utility abbiamo le funzioni che vengono utilizzate dalle altre entità per leggere e scrivere su file ed eseguire altre operazioni elementari utili.

#### Le strutture dati utilizzate sono:
##### ADD_DEL_SET: Struttura utilizzata per memorizzare l’operazione da eseguire:
-	command: indica il tipo di operazione che puo essere ADD per l’aggiunta, DEL per l’eliminazione e SET per la modifica.
-	num: indica il numero del byte su cui eseguire l’operazione.
-	byte: indica il byte da aggiungere o modificare.
##### DISTANCE_PATH: Struttura utilizzata per memorizzare il path di un file con relativa distanza di Edit rispetto ad un altro file:
-	distance: distanza di Edit tra il file preso in considerazione ed un altro.
-	path: percorso del file preso in considerazione.
